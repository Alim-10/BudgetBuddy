<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BudgetBuddy</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    body {
      background: linear-gradient(to right, #f0f4ff, #ffffff);
      font-family: 'Segoe UI', sans-serif;
    }
    .card {
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    .income { color: green; }
    .expense { color: red; }
  </style>
</head>
<body class="container py-5">
  <h1 class="text-center text-primary mb-4">üí∏ BudgetBuddy</h1>

  <ul class="nav nav-tabs mb-4" id="tabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="transactions-tab" data-bs-toggle="tab" data-bs-target="#transactions" type="button" role="tab">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="topup-tab" data-bs-toggle="tab" data-bs-target="#topup" type="button" role="tab">üí≥ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="ideas-tab" data-bs-toggle="tab" data-bs-target="#ideas" type="button" role="tab">üí° –ò–¥–µ–∏</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="charts-tab" data-bs-toggle="tab" data-bs-target="#charts" type="button" role="tab">üìà –ì—Ä–∞—Ñ–∏–∫–∏</button>
    </li>
  </ul>

  <div class="tab-content">
    <div class="tab-pane fade show active" id="transactions" role="tabpanel">
      <div class="row g-4">
        <div class="col-12">
          <div class="card p-4 text-center">
            <h3>–ë–∞–ª–∞–Ω—Å: <span id="balance" class="fw-bold">0‚Ç∏</span></h3>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card p-4">
            <h5>–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é</h5>
            <form id="transaction-form">
              <input type="number" class="form-control mb-2" name="amount" placeholder="–°—É–º–º–∞" required />
              <select class="form-select mb-2" name="type" required>
                <option value="income">–î–æ—Ö–æ–¥</option>
                <option value="expense">–†–∞—Å—Ö–æ–¥</option>
              </select>
              <input type="text" class="form-control mb-2" name="category" placeholder="–ö–∞—Ç–µ–≥–æ—Ä–∏—è" required />
              <input type="date" class="form-control mb-2" name="date" required />
              <input type="text" class="form-control mb-2" name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" />
              <button type="submit" class="btn btn-primary w-100">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card p-4">
            <h5>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h5>
            <ul id="transaction-list" class="list-group mt-3"></ul>
          </div>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="topup" role="tabpanel">
      <div class="card p-4">
        <h5>üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å (—à—É—Ç–æ—á–Ω–æ)</h5>
        <form id="topup-form">
          <input type="number" class="form-control mb-2" name="topupAmount" placeholder="–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è" required />
          <select class="form-select mb-2" name="card">
            <option>–ö–∞—Ä—Ç–∞ –•–∞–ª–≤–∞ ‚Äî 1234 5678 9012 3456</option>
            <option>–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞ ‚Äî 0000 1111 2222 3333</option>
            <option>–í–æ–ª—à–µ–±–Ω—ã–π –∫–æ—à–µ–ª—ë–∫ ‚Äî 9999 8888 7777 6666</option>
          </select>
          <input type="text" class="form-control mb-2" placeholder="–ò–º—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∫–∞—Ä—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ò–≤–∞–Ω –¶–∞—Ä—å)" required />
          <button class="btn btn-success w-100">–ü–æ–ø–æ–ª–Ω–∏—Ç—å (–Ω–µ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É üòâ)</button>
        </form>
      </div>
    </div>

    <div class="tab-pane fade" id="ideas" role="tabpanel">
      <div class="card p-4">
        <h5>üí° –°–æ–≤–µ—Ç—ã –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏</h5>
        <ul>
          <li>–û—Ç–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ 10% –æ—Ç –¥–æ—Ö–æ–¥–∞</li>
          <li>–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏</li>
          <li>–ü–æ–∫—É–ø–∞–π—Ç–µ –ø–æ —Å–ø–∏—Å–∫—É</li>
          <li>–°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Ü–µ–Ω—ã –ø–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–æ–π</li>
          <li>–í–µ–¥–∏—Ç–µ –±—é–¥–∂–µ—Ç –≤ —ç—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ üôÇ</li>
        </ul>
      </div>
    </div>

    <div class="tab-pane fade" id="charts" role="tabpanel">
      <div class="card p-4">
        <h5>üìä –î–æ—Ö–æ–¥—ã vs –†–∞—Å—Ö–æ–¥—ã</h5>
        <canvas id="pieChart"></canvas>
      </div>
    </div>
  </div>

  <script>
    let transactions = JSON.parse(localStorage.getItem("transactions") || "[]");

    function saveTransactions() {
      localStorage.setItem("transactions", JSON.stringify(transactions));
    }

    function updateBalance() {
      const income = transactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
      const expense = transactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
      document.getElementById("balance").textContent = (income - expense) + "‚Ç∏";
    }

    function renderTransaction(t) {
      const li = document.createElement("li");
      li.className = "list-group-item d-flex justify-content-between align-items-center";
      li.innerHTML = `
        <div>
          <strong>${t.category}</strong><br/>
          <small>${new Date(t.date).toLocaleDateString()} ‚Äî ${t.description || "-"}</small>
        </div>
        <span class="fw-bold ${t.type === 'income' ? 'income' : 'expense'}">
          ${t.type === 'income' ? '+' : '-'}${t.amount}‚Ç∏
        </span>`;
      return li;
    }

    function renderTransactions() {
      const list = document.getElementById("transaction-list");
      list.innerHTML = "";
      transactions.forEach(t => list.appendChild(renderTransaction(t)));
      renderPieChart();
      updateBalance();
    }

    document.getElementById("transaction-form").addEventListener("submit", e => {
      e.preventDefault();
      const form = e.target;
      const data = Object.fromEntries(new FormData(form).entries());
      data.amount = parseFloat(data.amount);
      transactions.push(data);
      saveTransactions();
      form.reset();
      renderTransactions();
    });

    document.getElementById("topup-form").addEventListener("submit", e => {
      e.preventDefault();
      const form = e.target;
      const topupAmount = parseFloat(form.topupAmount.value);
      const transaction = {
        amount: topupAmount,
        type: 'income',
        category: '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ',
        date: new Date().toISOString(),
        description: `–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–∞—Ä—Ç—É: ${form.card.value}`
      };
      transactions.push(transaction);
      saveTransactions();
      form.reset();
      renderTransactions();
    });

    function renderPieChart() {
      const ctx = document.getElementById('pieChart').getContext('2d');
      const income = transactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
      const expense = transactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);

      if (window.pieChartInstance) window.pieChartInstance.destroy();
      window.pieChartInstance = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: ['–î–æ—Ö–æ–¥—ã', '–†–∞—Å—Ö–æ–¥—ã'],
          datasets: [{
            data: [income, expense],
            backgroundColor: ['#198754', '#dc3545']
          }]
        },
        options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
      });
    }

    renderTransactions();
  </script>
</body>
</html>
